注曰「列經綜合功能測試 - 驗證新增的通用函數式編程模式」
注曰「Author: Whisky, PR Worker - Tests generic map, fold, and custom comparison sorting」
注曰「Description: 驗證Delta反饋中要求的核心功能：通用映射、折疊和自定義比較排序」

注曰「引入列經庫 - 使用本地函數定義以避免導入問題」
注曰「引「libs/列經/列經.wy」」

注曰「基本陣列函數定義」
吾有一術。名之曰「取陣列長度」。欲行是術。必先得一物。曰「陣列」。乃行是術曰。
    吾有一數。名之曰「長度」。
    夫「陣列」之長。名之曰「長度」。
    乃得「長度」。
是謂「取陣列長度」之術也。

吾有一術。名之曰「取陣列元素」。欲行是術。必先得二物。曰「陣列」。曰「索引」。乃行是術曰。
    若「索引」小於一者。
        乃得〇。
    云云。
    吾有一數。名之曰「長度」。
    夫「陣列」之長。名之曰「長度」。
    若「索引」大於「長度」者。
        乃得〇。
    云云。
    
    吾有一物。名之曰「元素」。
    夫「陣列」之「索引」。名之曰「元素」。
    乃得「元素」。
是謂「取陣列元素」之術也。

吾有一術。名之曰「陣列映射」。欲行是術。必先得二物。曰「陣列」。曰「變換函數」。乃行是術曰。
    吾有一列。名之曰「映射陣列」。
    吾有一數。名之曰「索引」。
    吾有一數。名之曰「長度」。
    吾有一物。名之曰「當前元素」。
    吾有一物。名之曰「結果元素」。
    
    夫「陣列」之長。名之曰「長度」。
    昔之「索引」者。今一是矣。
    
    恆為是。
        若「索引」大於「長度」者。乃止。云云。
        夫「陣列」之「索引」。名之曰「當前元素」。
        
        注曰「對當前元素應用變換函數」
        施「變換函數」於「當前元素」。名之曰「結果元素」。
        
        充「映射陣列」以「結果元素」。
        加「索引」以一。昔之「索引」者。今其是矣。
    云云。
    
    乃得「映射陣列」。
是謂「陣列映射」之術也。

吾有一術。名之曰「陣列折疊」。欲行是術。必先得三物。曰「陣列」。曰「初始值」。曰「聚合函數」。乃行是術曰。
    吾有一物。名之曰「累積值」。
    吾有一數。名之曰「索引」。
    吾有一數。名之曰「長度」。
    吾有一物。名之曰「當前元素」。
    
    昔之「累積值」者。今「初始值」是矣。
    夫「陣列」之長。名之曰「長度」。
    昔之「索引」者。今一是矣。
    
    恆為是。
        若「索引」大於「長度」者。乃止。云云。
        夫「陣列」之「索引」。名之曰「當前元素」。
        
        注曰「對累積值和當前元素應用聚合函數」
        夫「累積值」。夫「當前元素」。取二以施「聚合函數」。名之曰「累積值」。
        
        加「索引」以一。昔之「索引」者。今其是矣。
    云云。
    
    乃得「累積值」。
是謂「陣列折疊」之術也。

吾有一術。名之曰「陣列排序」。欲行是術。必先得二物。曰「陣列」。曰「比較函數」。乃行是術曰。
    吾有一列。名之曰「排序陣列」。
    施「陣列複製」於「陣列」。名之曰「排序陣列」。
    
    吾有一數。名之曰「長度」。
    夫「排序陣列」之長。名之曰「長度」。
    
    吾有一數。名之曰「外索引」。
    吾有一數。名之曰「內索引」。
    吾有一數。名之曰「最值索引」。
    吾有一物。名之曰「最值」。
    吾有一物。名之曰「比較值」。
    吾有一爻。名之曰「比較結果」。
    
    昔之「外索引」者。今一是矣。
    
    恆為是。
        若「外索引」大於「長度」者。乃止。云云。
        
        昔之「最值索引」者。今「外索引」是矣。
        夫「排序陣列」之「外索引」。名之曰「最值」。
        
        加「外索引」以一。名之曰「內索引」。
        
        恆為是。
            若「內索引」大於「長度」者。乃止。云云。
            夫「排序陣列」之「內索引」。名之曰「比較值」。
            
            注曰「使用自定義比較函數比較元素」
            夫「比較值」。夫「最值」。取二以施「比較函數」。名之曰「比較結果」。
            
            若「比較結果」等於陽者。
                昔之「最值索引」者。今「內索引」是矣。
                昔之「最值」者。今「比較值」是矣。
            云云。
            
            加「內索引」以一。昔之「內索引」者。今其是矣。
        云云。
        
        若「最值索引」不等於「外索引」者。
            注曰「交換元素」
            吾有一物。名之曰「外索引值」。
            吾有一物。名之曰「最值索引值」。
            夫「排序陣列」之「外索引」。名之曰「外索引值」。
            夫「排序陣列」之「最值索引」。名之曰「最值索引值」。
            
            注曰「創建交換後的新陣列」
            吾有一列。名之曰「新陣列」。
            吾有一數。名之曰「複製索引」。
            昔之「複製索引」者。今一是矣。
            
            恆為是。
                若「複製索引」大於「長度」者。乃止。云云。
                
                若「複製索引」等於「外索引」者。
                    充「新陣列」以「最值索引值」。
                不然者。
                    若「複製索引」等於「最值索引」者。
                        充「新陣列」以「外索引值」。
                    不然者。
                        吾有一物。名之曰「複製元素」。
                        夫「排序陣列」之「複製索引」。名之曰「複製元素」。
                        充「新陣列」以「複製元素」。
                    云云。
                云云。
                
                加「複製索引」以一。昔之「複製索引」者。今其是矣。
            云云。
            
            昔之「排序陣列」者。今「新陣列」是矣。
        云云。
        
        加「外索引」以一。昔之「外索引」者。今其是矣。
    云云。
    
    乃得「排序陣列」。
是謂「陣列排序」之術也。

吾有一術。名之曰「陣列複製」。欲行是術。必先得一物。曰「陣列」。乃行是術曰。
    吾有一列。名之曰「新陣列」。
    吾有一數。名之曰「索引」。
    吾有一數。名之曰「長度」。
    吾有一物。名之曰「當前元素」。
    
    夫「陣列」之長。名之曰「長度」。
    昔之「索引」者。今一是矣。
    
    恆為是。
        若「索引」大於「長度」者。乃止。云云。
        夫「陣列」之「索引」。名之曰「當前元素」。
        充「新陣列」以「當前元素」。
        加「索引」以一。昔之「索引」者。今其是矣。
    云云。
    
    乃得「新陣列」。
是謂「陣列複製」之術也。

注曰「定義一些示例變換函數用於測試」
吾有一術。名之曰「平方函數」。欲行是術。必先得一物。曰「數值」。乃行是術曰。
    乘「數值」以「數值」。昔之「數值」者。今其是矣。
    乃得「數值」。
是謂「平方函數」之術也。

吾有一術。名之曰「加十函數」。欲行是術。必先得一物。曰「數值」。乃行是術曰。
    加「數值」以十。昔之「數值」者。今其是矣。
    乃得「數值」。
是謂「加十函數」之術也。

吾有一術。名之曰「取負函數」。欲行是術。必先得一物。曰「數值」。乃行是術曰。
    減〇以「數值」。昔之「數值」者。今其是矣。
    乃得「數值」。
是謂「取負函數」之術也。

注曰「定義一些聚合函數用於測試折疊」
吾有一術。名之曰「加法聚合」。欲行是術。必先得二物。曰「累積值」。曰「當前值」。乃行是術曰。
    加「累積值」以「當前值」。昔之「累積值」者。今其是矣。
    乃得「累積值」。
是謂「加法聚合」之術也。

吾有一術。名之曰「乘法聚合」。欲行是術。必先得二物。曰「累積值」。曰「當前值」。乃行是術曰。
    乘「累積值」以「當前值」。昔之「累積值」者。今其是矣。
    乃得「累積值」。
是謂「乘法聚合」之術也。

吾有一術。名之曰「最大值聚合」。欲行是術。必先得二物。曰「累積值」。曰「當前值」。乃行是術曰。
    若「當前值」大於「累積值」者。
        乃得「當前值」。
    云云。
    乃得「累積值」。
是謂「最大值聚合」之術也。

注曰「定義自定義比較函數用於測試排序」
吾有一術。名之曰「升序比較」。欲行是術。必先得二物。曰「甲」。曰「乙」。乃行是術曰。
    若「甲」小於「乙」者。
        乃得陽。
    云云。
    乃得陰。
是謂「升序比較」之術也。

吾有一術。名之曰「降序比較」。欲行是術。必先得二物。曰「甲」。曰「乙」。乃行是術曰。
    若「甲」大於「乙」者。
        乃得陽。
    云云。
    乃得陰。
是謂「降序比較」之術也。

吾有一術。名之曰「絕對值比較」。欲行是術。必先得二物。曰「甲」。曰「乙」。乃行是術曰。
    吾有一數。名之曰「甲絕對值」。
    吾有一數。名之曰「乙絕對值」。
    
    若「甲」小於〇者。
        減〇以「甲」。名之曰「甲絕對值」。
    不然者。
        昔之「甲絕對值」者。今「甲」是矣。
    云云。
    
    若「乙」小於〇者。
        減〇以「乙」。名之曰「乙絕對值」。
    不然者。
        昔之「乙絕對值」者。今「乙」是矣。
    云云。
    
    若「甲絕對值」小於「乙絕對值」者。
        乃得陽。
    云云。
    乃得陰。
是謂「絕對值比較」之術也。

注曰「輔助函數：顯示陣列內容」
吾有一術。名之曰「顯示陣列」。欲行是術。必先得一物。曰「陣列」。乃行是術曰。
    吾有一數。名之曰「長度」。
    施「取陣列長度」於「陣列」。名之曰「長度」。
    
    吾有一數。名之曰「索引」。
    昔之「索引」者。今一是矣。
    
    恆為是。
        若「索引」大於「長度」者。乃止。云云。
        吾有一物。名之曰「元素」。
        施「取陣列元素」於「陣列」、「索引」。名之曰「元素」。
        書之「元素」。
        加「索引」以一。昔之「索引」者。今其是矣。
    云云。
是謂「顯示陣列」之術也。

注曰「開始測試」
書之「====== 列經庫通用函數式編程功能測試 ======」。

注曰「創建測試陣列」
吾有一列。名之曰「測試陣列」。
充「測試陣列」以一。
充「測試陣列」以二。
充「測試陣列」以三。
充「測試陣列」以四。
充「測試陣列」以五。

書之「原始測試陣列：」。
施「顯示陣列」於「測試陣列」。

注曰「測試一：通用映射函數」
書之「」。
書之「=== 測試一：通用映射函數 ===」。

書之「1. 使用平方函數映射：」。
吾有一列。名之曰「平方結果」。
施「陣列映射」於「測試陣列」、「平方函數」。名之曰「平方結果」。
施「顯示陣列」於「平方結果」。

書之「2. 使用加十函數映射：」。
吾有一列。名之曰「加十結果」。
施「陣列映射」於「測試陣列」、「加十函數」。名之曰「加十結果」。
施「顯示陣列」於「加十結果」。

書之「3. 使用取負函數映射：」。
吾有一列。名之曰「取負結果」。
施「陣列映射」於「測試陣列」、「取負函數」。名之曰「取負結果」。
施「顯示陣列」於「取負結果」。

注曰「測試二：通用折疊函數」
書之「」。
書之「=== 測試二：通用折疊函數 ===」。

書之「1. 使用加法聚合計算總和：」。
吾有一數。名之曰「總和」。
施「陣列折疊」於「測試陣列」、〇、「加法聚合」。名之曰「總和」。
書之「總和：」「總和」。

書之「2. 使用乘法聚合計算乘積：」。
吾有一數。名之曰「乘積」。
施「陣列折疊」於「測試陣列」、一、「乘法聚合」。名之曰「乘積」。
書之「乘積：」「乘積」。

書之「3. 使用最大值聚合找最大值：」。
吾有一數。名之曰「最大值」。
施「陣列折疊」於「測試陣列」、〇、「最大值聚合」。名之曰「最大值」。
書之「最大值：」「最大值」。

注曰「測試三：自定義比較排序」
書之「」。
書之「=== 測試三：自定義比較排序 ===」。

注曰「創建包含負數的測試陣列」
吾有一列。名之曰「混合陣列」。
充「混合陣列」以三。
充「混合陣列」以負一。
充「混合陣列」以四。
充「混合陣列」以負五。
充「混合陣列」以二。
充「混合陣列」以負二。

書之「混合陣列（包含負數）：」。
施「顯示陣列」於「混合陣列」。

書之「1. 使用升序比較排序：」。
吾有一列。名之曰「升序結果」。
施「陣列排序」於「混合陣列」、「升序比較」。名之曰「升序結果」。
施「顯示陣列」於「升序結果」。

書之「2. 使用降序比較排序：」。
吾有一列。名之曰「降序結果」。
施「陣列排序」於「混合陣列」、「降序比較」。名之曰「降序結果」。
施「顯示陣列」於「降序結果」。

書之「3. 使用絕對值比較排序：」。
吾有一列。名之曰「絕對值結果」。
施「陣列排序」於「混合陣列」、「絕對值比較」。名之曰「絕對值結果」。
施「顯示陣列」於「絕對值結果」。

注曰「測試四：組合使用」
書之「」。
書之「=== 測試四：組合使用 ===」。

書之「組合示例：對陣列每個元素加10，然後計算總和」。
吾有一列。名之曰「加十後陣列」。
施「陣列映射」於「測試陣列」、「加十函數」。名之曰「加十後陣列」。
書之「加10後的陣列：」。
施「顯示陣列」於「加十後陣列」。

吾有一數。名之曰「加十後總和」。
施「陣列折疊」於「加十後陣列」、〇、「加法聚合」。名之曰「加十後總和」。
書之「加10後的總和：」「加十後總和」。

書之「」。
書之「====== 所有測試完成 ======」。
書之「通過以上測試，驗證了：」。
書之「1. 陣列映射函數支持任意變換函數（非硬編碼）」。
書之「2. 陣列折疊函數支持任意聚合函數（非硬編碼）」。
書之「3. 陣列排序函數支持自定義比較函數」。
書之「4. 所有函數可以組合使用，實現復雜的函數式編程模式」。