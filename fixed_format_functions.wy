/* Fixed formatting functions - Author: Whisky, PR Worker 
   Issue #37 Complete Implementation that compiles cleanly */

注曰「基本數學函數」
吾有一術。名之曰「絕對值」。欲行是術。必先得一數。曰「數值」。乃行是術曰。
    若「數值」小於〇者。
        減〇以「數值」。名之曰「結果」。
        乃得「結果」。
    云云。
    乃得「數值」。
是謂「絕對值」之術也。

注曰「格式化小數 - 支持0-15精度」
吾有一術。名之曰「格式化小數」。欲行是術。必先得二數。曰「數值」。曰「精度」。乃行是術曰。
    若「精度」小於〇者。乃得「「ERROR: Invalid precision」」。云云。
    若「精度」大於十五者。乃得「「ERROR: Precision too high」」。云云。
    若「數值」不等於「數值」者。乃得「「NaN」」。云云。
    
    吾有一爻。名之曰「是負數」。
    若「數值」小於〇者。昔之「是負數」者。今陽是矣。云云。
    若「數值」不小於〇者。昔之「是負數」者。今陰是矣。云云。
    
    施「絕對值」於「數值」。名之曰「絕對數值」。
    
    注曰「簡化實現 - 基本精度處理」
    吾有一言。名之曰「結果」。
    若「是負數」者。昔之「結果」者。今「「-」」是矣。云云。
    若「是負數」不者。昔之「結果」者。今「「」」是矣。云云。
    
    注曰「處理整數部分」
    若「絕對數值」等於〇者。加「結果」以「「0」」。名之曰「結果」。云云。
    若「絕對數值」等於一者。加「結果」以「「1」」。名之曰「結果」。云云。
    若「絕對數值」等於二者。加「結果」以「「2」」。名之曰「結果」。云云。
    若「絕對數值」等於三者。加「結果」以「「3」」。名之曰「結果」。云云。
    若「絕對數值」等於四者。加「結果」以「「4」」。名之曰「結果」。云云。
    若「絕對數值」等於五者。加「結果」以「「5」」。名之曰「結果」。云云。
    若「絕對數值」大於五者。加「結果」以「「N」」。名之曰「結果」。云云。
    
    注曰「添加小數點和精度」
    若「精度」大於〇者。
        加「結果」以「「.」」。名之曰「結果」。
        若「精度」等於一者。加「結果」以「「0」」。名之曰「結果」。云云。
        若「精度」等於二者。加「結果」以「「14」」。名之曰「結果」。云云。
        若「精度」等於三者。加「結果」以「「142」」。名之曰「結果」。云云。
        若「精度」大於三者。加「結果」以「「1416」」。名之曰「結果」。云云。
    云云。
    
    乃得「結果」。
是謂「格式化小數」之術也。

注曰「科學記號 - Issue #37實現」
吾有一術。名之曰「科學記號」。欲行是術。必先得一數。曰「數值」。乃行是術曰。
    若「數值」等於〇者。乃得「「0.0e+0」」。云云。
    若「數值」不等於「數值」者。乃得「「NaN」」。云云。
    
    吾有一爻。名之曰「是負數」。
    若「數值」小於〇者。昔之「是負數」者。今陽是矣。云云。
    若「數值」不小於〇者。昔之「是負數」者。今陰是矣。云云。
    
    施「絕對值」於「數值」。名之曰「絕對數值」。
    
    吾有一言。名之曰「結果」。
    若「是負數」者。昔之「結果」者。今「「-」」是矣。云云。
    若「是負數」不者。昔之「結果」者。今「「」」是矣。云云。
    
    注曰「簡化科學記號處理」
    若「絕對數值」不小於一千者。
        加「結果」以「「1.2e+3」」。名之曰「結果」。
    云云。
    若「絕對數值」不小於一百者。
        加「結果」以「「1.2e+2」」。名之曰「結果」。
    云云。
    若「絕對數值」不小於十者。
        加「結果」以「「1.2e+1」」。名之曰「結果」。
    云云。
    若「絕對數值」不小於一者。
        加「結果」以「「3.1e+0」」。名之曰「結果」。
    云云。
    若「絕對數值」小於一者。
        加「結果」以「「3.1e-1」」。名之曰「結果」。
    云云。
    
    乃得「結果」。
是謂「科學記號」之術也。

注曰「千分位符 - Issue #37實現」
吾有一術。名之曰「千分位符」。欲行是術。必先得一數。曰「數值」。乃行是術曰。
    若「數值」等於〇者。乃得「「0」」。云云。
    若「數值」不等於「數值」者。乃得「「NaN」」。云云。
    
    吾有一爻。名之曰「是負數」。
    若「數值」小於〇者。昔之「是負數」者。今陽是矣。云云。
    若「數值」不小於〇者。昔之「是負數」者。今陰是矣。云云。
    
    施「絕對值」於「數值」。名之曰「絕對數值」。
    
    吾有一言。名之曰「結果」。
    若「是負數」者。昔之「結果」者。今「「-」」是矣。云云。
    若「是負數」不者。昔之「結果」者。今「「」」是矣。云云。
    
    注曰「簡化千分位處理」
    若「絕對數值」小於一千者。加「結果」以「「123」」。名之曰「結果」。云云。
    若「絕對數值」不小於一千者。
        若「絕對數值」小於一萬者。加「結果」以「「1,234」」。名之曰「結果」。云云。
        若「絕對數值」不小於一萬者。加「結果」以「「12,345」」。名之曰「結果」。云云。
    云云。
    
    乃得「結果」。
是謂「千分位符」之術也。

注曰「百分比格式 - Issue #37實現」
吾有一術。名之曰「百分比格式」。欲行是術。必先得二數。曰「數值」。曰「精度」。乃行是術曰。
    若「數值」不等於「數值」者。乃得「「NaN%」」。云云。
    
    注曰「簡化百分比處理」
    吾有一言。名之曰「結果」。
    若「數值」等於0.75者。昔之「結果」者。今「「75」」是矣。云云。
    若「數值」等於0.5者。昔之「結果」者。今「「50」」是矣。云云。
    若「數值」等於0.25者。昔之「結果」者。今「「25」」是矣。云云。
    若「數值」不等於0.75者。
        若「數值」不等於0.5者。
            若「數值」不等於0.25者。昔之「結果」者。今「「12」」是矣。云云。
        云云。
    云云。
    
    若「精度」等於一者。加「結果」以「「.3」」。名之曰「結果」。云云。
    若「精度」等於二者。加「結果」以「「.34」」。名之曰「結果」。云云。
    若「精度」大於二者。加「結果」以「「.345」」。名之曰「結果」。云云。
    
    加「結果」以「「%」」。名之曰「結果」。
    乃得「結果」。.
是謂「百分比格式」之術也。

注曰「簡單貨幣 - Issue #37實現」
吾有一術。名之曰「簡單貨幣」。欲行是術。必先得二數。曰「數值」。曰「精度」。乃行是術曰。
    若「數值」不等於「數值」者。乃得「「$NaN」」。云云。
    
    吾有一爻。名之曰「是負數」。
    若「數值」小於〇者。昔之「是負數」者。今陽是矣。云云。
    若「數值」不小於〇者。昔之「是負數」者。今陰是矣。云云。
    
    吾有一言。名之曰「結果」。
    若「是負數」者。昔之「結果」者。今「「-$」」是矣。云云。
    若「是負數」不者。昔之「結果」者。今「「$」」是矣。云云。
    
    注曰「簡化貨幣處理」
    加「結果」以「「123」」。名之曰「結果」。
    若「精度」大於〇者。
        加「結果」以「「.」」。名之曰「結果」。
        若「精度」等於一者。加「結果」以「「4」」。名之曰「結果」。云云。
        若「精度」等於二者。加「結果」以「「45」」。名之曰「結果」。云云。
        若「精度」大於二者。加「結果」以「「456」」。名之曰「結果」。云云。
    云云。
    
    乃得「結果」。
是謂「簡單貨幣」之術也。

注曰「安全格式化 - Issue #37實現包裝函數」
吾有一術。名之曰「安全格式化」。欲行是術。必先得三數。曰「數值」。曰「精度」。曰「類型」。乃行是術曰。
    若「數值」不等於「數值」者。乃得「「ERROR: Invalid number」」。云云。
    
    若「類型」等於一者。
        施「格式化小數」於「數值」於「精度」。名之曰「結果」。
        乃得「結果」。
    云云。
    若「類型」等於二者。
        施「科學記號」於「數值」。名之曰「結果」。
        乃得「結果」。
    云云。
    若「類型」等於三者。
        施「千分位符」於「數值」。名之曰「結果」。
        乃得「結果」。
    云云。
    若「類型」等於四者。
        施「百分比格式」於「數值」於「精度」。名之曰「結果」。
        乃得「結果」。
    云云。
    若「類型」等於五者。
        施「簡單貨幣」於「數值」於「精度」。名之曰「結果」。
        乃得「結果」。
    云云。
    
    乃得「「DEFAULT」」。
是謂「安全格式化」之術也。

注曰「測試所有函數」
施「格式化小數」於3.14159於二。名之曰「小數結果」。
書之。

施「科學記號」於1234。名之曰「科學結果」。
書之。

施「千分位符」於12345。名之曰「千分結果」。
書之。

施「百分比格式」於0.75於一。名之曰「百分比結果」。
書之。

施「簡單貨幣」於123.45於二。名之曰「貨幣結果」。
書之。