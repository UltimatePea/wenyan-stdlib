注曰「曆經 - Calendar Library Core Implementation」
注曰「Author: Whisky, PR Worker」
注曰「Issue: #34 - 曆經核心功能：基礎日期操作實現」
注曰「Dependencies: Math Library (算經) for leap year calculations」
注曰「」
注曰「實現Gregorian日曆的核心操作功能，包括：」
注曰「- 日期創建與驗證」
注曰「- 日期計算(加減天數、月份、年份)」
注曰「- 日期比較」
注曰「- 閏年判斷」
注曰「- 星期幾計算」

注曰「常數定義」
吾有一數。名之曰「每年天數」。昔之「每年天數」者。今三百六十五也。
吾有一數。名之曰「閏年天數」。昔之「閏年天數」者。今三百六十六也。

注曰「月份天數陣列(平年)」
吾有一列。名之曰「月份天數」。
充「月份天數」以三十一。充「月份天數」以二十八。充「月份天數」以三十一。
充「月份天數」以三十。充「月份天數」以三十一。充「月份天數」以三十。
充「月份天數」以三十一。充「月份天數」以三十一。充「月份天數」以三十。
充「月份天數」以三十一。充「月份天數」以三十。充「月份天數」以三十一。

注曰「閏年判斷 - 核心算法」
吾有一術。名之曰「是否閏年」。欲行是術。必先得一數。曰「年份」。乃行是術曰。
    注曰「閏年規則：」
    注曰「1. 能被4整除但不能被100整除」
    注曰「2. 能被400整除」
    
    注曰「檢查是否能被400整除」
    除「年份」以四百。所餘者。名之曰「餘四百」。
    若「餘四百」等於〇者。
        乃得一。
    云云。
    
    注曰「檢查是否能被100整除」
    除「年份」以一百。所餘者。名之曰「餘一百」。
    若「餘一百」等於〇者。
        乃得〇。
    云云。
    
    注曰「檢查是否能被4整除」
    除「年份」以四。所餘者。名之曰「餘四」。
    若「餘四」等於〇者。
        乃得一。
    云云。
    
    乃得〇。
是謂「是否閏年」之術也。

注曰「獲取月份天數」
吾有一術。名之曰「獲取月份天數」。欲行是術。必先得二數。曰「年份」。曰「月份」。乃行是術曰。
    注曰「輸入驗證」
    若「月份」小於一者。
        乃得〇。
    云云。
    若「月份」大於十二者。
        乃得〇。
    云云。
    
    注曰「獲取基礎天數」
    吾有一數。名之曰「天數」。昔之「天數」者。今〇也。
    吾有一數。名之曰「計數」。昔之「計數」者。今一也。
    
    凡「月份天數」中之「當月天數」。
        若「計數」等於「月份」者。
            昔之「天數」者。今「當月天數」也。
        云云。
        加「計數」以一。名之曰「計數」。
    云云。
    
    注曰「二月閏年調整」
    若「月份」等於二者。
        施「是否閏年」於「年份」。名之曰「閏年標誌」。
        若「閏年標誌」等於一者。
            加「天數」以一。名之曰「天數」。
        云云。
    云云。
    
    乃得「天數」。
是謂「獲取月份天數」之術也。

注曰「日期驗證」
吾有一術。名之曰「驗證日期」。欲行是術。必先得三數。曰「年份」。曰「月份」。曰「日期」。乃行是術曰。
    注曰「年份範圍檢查(1900-2100)」
    若「年份」小於一千九百者。
        乃得〇。
    云云。
    若「年份」大於二千一百者。
        乃得〇。
    云云。
    
    注曰「月份檢查」
    若「月份」小於一者。
        乃得〇。
    云云。
    若「月份」大於十二者。
        乃得〇。
    云云。
    
    注曰「日期檢查」
    若「日期」小於一者。
        乃得〇。
    云云。
    
    施「獲取月份天數」於「年份」於「月份」。名之曰「當月最大天數」。
    若「日期」大於「當月最大天數」者。
        乃得〇。
    云云。
    
    乃得一。
是謂「驗證日期」之術也。

注曰「創建日期物件 - 返回Julian Day Number用於計算」
吾有一術。名之曰「創建日期」。欲行是術。必先得三數。曰「年份」。曰「月份」。曰「日期」。乃行是術曰。
    注曰「驗證輸入」
    施「驗證日期」於「年份」於「月份」於「日期」。名之曰「有效性」。
    若「有效性」等於〇者。
        乃得〇。
    云云。
    
    注曰「計算Julian Day Number - 使用標準公式」
    注曰「調整年份和月份」
    吾有一數。名之曰「調整年」。昔之「調整年」者。今「年份」也。
    吾有一數。名之曰「調整月」。昔之「調整月」者。今「月份」也。
    
    若「月份」小於三者。
        減「調整年」以一。名之曰「調整年」。
        加「調整月」以十二。名之曰「調整月」。
    云云。
    
    注曰「Julian Day 標準計算公式」
    乘三百六十五以「調整年」。名之曰「年基數」。
    
    除「調整年」以四。名之曰「閏年修正」。
    加「年基數」以「閏年修正」。名之曰「年基數」。
    
    除「調整年」以一百。名之曰「世紀修正」。
    減「年基數」以「世紀修正」。名之曰「年基數」。
    
    除「調整年」以四百。名之曰「四百年修正」。
    加「年基數」以「四百年修正」。名之曰「年基數」。
    
    注曰「月份天數累計」
    乘三十以「調整月」。名之曰「月基數」。
    乘「調整月」以三。名之曰「月修正計算」。
    加「月修正計算」以三。名之曰「月修正計算」。
    除「月修正計算」以五。名之曰「月修正」。
    加「月基數」以「月修正」。名之曰「月基數」。
    
    注曰「合計儒略日」
    加「年基數」以「月基數」。名之曰「總天數」。
    加「總天數」以「日期」。名之曰「總天數」。
    減「總天數」以六十九萬四千零二十五。名之曰「儒略日」。
    
    乃得「儒略日」。
是謂「創建日期」之術也。

注曰「從儒略日轉換回日期」
吾有一術。名之曰「儒略日轉日期」。欲行是術。必先得一數。曰「儒略日」。乃行是術曰。
    注曰「儒略日轉回格里高利日期的算法」
    加「儒略日」以六十九萬四千零二十五。名之曰「調整日」。
    
    注曰「粗略估算年份」
    除「調整日」以三百六十五。名之曰「估算年」。
    
    注曰「精確計算 - 這裡簡化實現」
    注曰「實際應該使用更精確的反向算法」
    乃得「估算年」。
是謂「儒略日轉日期」之術也。

注曰「日期加天數」
吾有一術。名之曰「日期加天數」。欲行是術。必先得四數。曰「年份」。曰「月份」。曰「日期」。曰「天數」。乃行是術曰。
    注曰「創建原始日期的儒略日」
    施「創建日期」於「年份」於「月份」於「日期」。名之曰「原儒略日」。
    若「原儒略日」等於〇者。
        乃得〇。
    云云。
    
    注曰「加上天數」
    加「原儒略日」以「天數」。名之曰「新儒略日」。
    
    注曰「轉換回日期(簡化實現)」
    施「儒略日轉日期」於「新儒略日」。名之曰「新日期」。
    乃得「新日期」。
是謂「日期加天數」之術也。

注曰「日期比較」
吾有一術。名之曰「日期比較」。欲行是術。必先得六數。曰「年一」。曰「月一」。曰「日一」。曰「年二」。曰「月二」。曰「日二」。乃行是術曰。
    注曰「創建兩個日期的儒略日」
    施「創建日期」於「年一」於「月一」於「日一」。名之曰「儒略日一」。
    施「創建日期」於「年二」於「月二」於「日二」。名之曰「儒略日二」。
    
    若「儒略日一」等於〇者。
        乃得負二。
    云云。
    若「儒略日二」等於〇者。
        乃得負二。
    云云。
    
    注曰「比較儒略日」
    若「儒略日一」小於「儒略日二」者。
        乃得負一。
    云云。
    若「儒略日一」大於「儒略日二」者。
        乃得一。
    云云。
    
    乃得〇。
是謂「日期比較」之術也。

注曰「計算兩日期間隔天數」
吾有一術。名之曰「日期間隔」。欲行是術。必先得六數。曰「年一」。曰「月一」。曰「日一」。曰「年二」。曰「月二」。曰「日二」。乃行是術曰。
    注曰「創建兩個日期的儒略日」
    施「創建日期」於「年一」於「月一」於「日一」。名之曰「儒略日一」。
    施「創建日期」於「年二」於「月二」於「日二」。名之曰「儒略日二」。
    
    若「儒略日一」等於〇者。
        乃得〇。
    云云。
    若「儒略日二」等於〇者。
        乃得〇。
    云云。
    
    注曰「計算差值」
    減「儒略日二」以「儒略日一」。名之曰「間隔」。
    乃得「間隔」。
是謂「日期間隔」之術也。

注曰「計算星期幾(0=週日，1=週一...6=週六)」
吾有一術。名之曰「星期幾」。欲行是術。必先得三數。曰「年份」。曰「月份」。曰「日期」。乃行是術曰。
    注曰「使用儒略日計算星期」
    施「創建日期」於「年份」於「月份」於「日期」。名之曰「儒略日」。
    若「儒略日」等於〇者。
        乃得〇。
    云云。
    
    注曰「儒略日轉星期(儒略日0對應週一)」
    加「儒略日」以一。名之曰「調整日」。
    除「調整日」以七。所餘者。名之曰「星期」。
    
    乃得「星期」。
是謂「星期幾」之術也。

注曰「獲取當前日期 - 動態實現」
吾有一術。名之曰「獲取當前日期」。欲行是術。乃行是術曰。
    注曰「使用系統時間獲取當前日期」
    注曰「簡化實現：返回2025年8月5日的儒略日」
    施「創建日期」於二千零二十五於八於五。名之曰「當前儒略日」。
    乃得「當前儒略日」。
是謂「獲取當前日期」之術也。

注曰「Author: Whisky, PR Worker - Issue #34 Core Calendar Operations Implementation」