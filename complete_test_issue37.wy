/* Complete Test for Issue #37 Number Formatting
   Author: Whisky, PR Worker
   All functions included inline to avoid import issues */

注曰「Helper Functions」

吾有一術。名之曰「絕對值」。欲行是術。必先得一數。曰「數值」。乃行是術曰。
    若「數值」小於〇者。
        減〇以「數值」。名之曰「結果」。
        乃得「結果」。
    云云。
    乃得「數值」。
是謂「絕對值」之術也。

吾有一術。名之曰「向下取整」。欲行是術。必先得一數。曰「數值」。乃行是術曰。
    若「數值」不等於「數值」者。乃得「數值」。云云。
    若「數值」等於〇者。乃得〇。云云。
    
    若「數值」大於〇者。
        除「數值」以一。名之曰「整數結果」。
        乘「整數結果」以一。名之曰「測試值」。
        若「測試值」等於「數值」者。
            乃得「數值」。
        云云。
        若「測試值」小於「數值」者。
            乃得「測試值」。
        云云。
        若「測試值」大於「數值」者。
            減「測試值」以一。名之曰「結果」。
            乃得「結果」。
        云云。
    云云。
    
    若「數值」小於〇者。
        施「絕對值」於「數值」。名之曰「正數值」。
        施「向下取整」於「正數值」。名之曰「正整數」。
        若「正整數」等於「正數值」者。
            減〇以「正整數」。名之曰「結果」。
            乃得「結果」。
        云云。
        加「正整數」以一。名之曰「向下值」。
        減〇以「向下值」。名之曰「結果」。
        乃得「結果」。
    云云。
    
    乃得〇。
是謂「向下取整」之術也。

吾有一術。名之曰「數字轉字符串」。欲行是術。必先得一數。曰「數值」。乃行是術曰。
    若「數值」不等於「數值」者。乃得「「NaN」」。云云。
    若「數值」等於〇者。乃得「「0」」。云云。
    
    吾有一爻。名之曰「是負數」。
    若「數值」小於〇者。昔之「是負數」者。今陽是矣。云云。
    若「數值」不小於〇者。昔之「是負數」者。今陰是矣。云云。
    
    施「絕對值」於「數值」。名之曰「絕對數值」。
    施「向下取整」於「絕對數值」。名之曰「整数值」。
    
    吾有一言。名之曰「數字字符串」。
    昔之「數字字符串」者。今「「」」是矣。
    
    若「整数值」等於〇者。
        昔之「數字字符串」者。今「「0」」是矣。
    云云。
    
    若「整数值」不等於〇者。
        吾有一數。名之曰「剩餘」。
        昔之「剩餘」者。今「整数值」是矣。
        
        吾有一列。名之曰「數字列表」。
        恆為是者。
            若「剩餘」等於〇者。乃止。云云。
            除「剩餘」以十。名之曰「商」。
            施「向下取整」於「商」。名之曰「商」。
            乘「商」以十。名之曰「商乘積」。
            減「剩餘」以「商乘積」。名之曰「餘數」。
            
            若「餘數」等於〇者。充「數字列表」以「「0」」。云云。
            若「餘數」等於一者。充「數字列表」以「「1」」。云云。
            若「餘數」等於二者。充「數字列表」以「「2」」。云云。
            若「餘數」等於三者。充「數字列表」以「「3」」。云云。
            若「餘數」等於四者。充「數字列表」以「「4」」。云云。
            若「餘數」等於五者。充「數字列表」以「「5」」。云云。
            若「餘數」等於六者。充「數字列表」以「「6」」。云云。
            若「餘數」等於七者。充「數字列表」以「「7」」。云云。
            若「餘數」等於八者。充「數字列表」以「「8」」。云云。
            若「餘數」等於九者。充「數字列表」以「「9」」。云云。
            
            昔之「剩餘」者。今「商」是矣。
        云云。
        
        凡「數字列表」中之「字符」。
            加「字符」以「數字字符串」。名之曰「數字字符串」。
        云云。
    云云。
    
    若「是負數」者。
        加「「-」」以「數字字符串」。名之曰「數字字符串」。
    云云。
    
    乃得「數字字符串」。
是謂「數字轉字符串」之術也。

吾有一術。名之曰「冪」。欲行是術。必先得二數。曰「底數」。曰「指數」。乃行是術曰。
    若「底數」不等於「底數」者。乃得「底數」。云云。
    若「指數」不等於「指數」者。乃得「指數」。云云。
    若「指數」等於〇者。乃得一。云云。
    若「底數」等於〇者。乃得〇。云云。
    若「底數」等於一者。乃得一。云云。
    
    若「指數」大於〇者。
        施「向下取整」於「指數」。名之曰「整數指數」。
        若「整數指數」等於「指數」者。
            若「整數指數」等於一者。乃得「底數」。云云。
            若「整數指數」等於二者。
                乘「底數」以「底數」。名之曰「結果」。
                乃得「結果」。
            云云。
            若「整數指數」等於三者。
                乘「底數」以「底數」。名之曰「平方」。
                乘「平方」以「底數」。名之曰「結果」。
                乃得「結果」。
            云云。
            吾有一數。名之曰「結果」。
            昔之「結果」者。今一是矣。
            吾有一數。名之曰「當前指數」。
            昔之「當前指數」者。今〇是矣。
            恆為是者。
                若「當前指數」等於「整數指數」者。乃止。云云。
                乘「結果」以「底數」。名之曰「結果」。
                加「當前指數」以一。名之曰「當前指數」。
            云云。
            乃得「結果」。
        云云。
    云云。
    
    若「指數」小於〇者。
        施「絕對值」於「指數」。名之曰「正指數」。
        施「冪」於「底數」於「正指數」。名之曰「正結果」。
        除一以「正結果」。名之曰「結果」。
        乃得「結果」。
    云云。
    
    乃得一。
是謂「冪」之術也。

注曰「Issue #37 Core Function: 格式化小數」

吾有一術。名之曰「格式化小數」。欲行是術。必先得二數。曰「數值」。曰「精度」。乃行是術曰。
    若「精度」小於〇者。乃得「「ERROR: Invalid precision」」。云云。
    若「精度」大於十五者。乃得「「ERROR: Precision too high」」。云云。
    
    若「數值」不等於「數值」者。乃得「「NaN」」。云云。
    
    吾有一爻。名之曰「是負數」。
    若「數值」小於〇者。昔之「是負數」者。今陽是矣。云云。
    若「數值」不小於〇者。昔之「是負數」者。今陰是矣。云云。
    
    施「絕對值」於「數值」。名之曰「絕對數值」。
    
    施「冪」於十於「精度」。名之曰「縮放因子」。
    乘「絕對數值」以「縮放因子」。名之曰「縮放數值」。
    除一以二。名之曰「半」。
    加「縮放數值」以「半」。名之曰「四捨五入值」。
    施「向下取整」於「四捨五入值」。名之曰「整數縮放值」。
    
    除「整數縮放值」以「縮放因子」。名之曰「整數部分」。
    施「向下取整」於「整數部分」。名之曰「整數部分」。
    乘「整數部分」以「縮放因子」。名之曰「整數部分乘積」。
    減「整數縮放值」以「整數部分乘積」。名之曰「小數部分縮放」。
    
    吾有一言。名之曰「結果」。
    昔之「結果」者。今「「」」是矣。
    若「是負數」者。
        昔之「結果」者。今「「-」」是矣。
    云云。
    
    施「數字轉字符串」於「整數部分」。名之曰「整數字符串」。
    加「結果」以「整數字符串」。名之曰「結果」。
    
    若「精度」大於〇者。
        加「結果」以「「.」」。名之曰「結果」。
        吾有一數。名之曰「當前精度」。
        昔之「當前精度」者。今「精度」是矣。
        恆為是者。
            若「當前精度」等於〇者。乃止。云云。
            除「小數部分縮放」以十。名之曰「下一位」。
            施「向下取整」於「下一位」。名之曰「下一位」。
            乘「下一位」以十。名之曰「下一位乘積」。
            減「小數部分縮放」以「下一位乘積」。名之曰「當前位」。
            
            施「數字轉字符串」於「當前位」。名之曰「當前位字符」。
            加「結果」以「當前位字符」。名之曰「結果」。
            
            昔之「小數部分縮放」者。今「下一位」是矣。
            減「當前精度」以一。名之曰「當前精度」。
        云云。
    云云。
    
    乃得「結果」。
是謂「格式化小數」之術也。

注曰「Issue #37 Testing All Requirements」

書之。「=== Issue #37 Number Formatting Test ===」。

吾有一數。名之曰「測試數一」。昔之「測試數一」者。今12345.6789也。
除二十五以一千。名之曰「小數」。
減〇以「小數」。名之曰「測試數二」。
吾有一數。名之曰「測試數三」。昔之「測試數三」者。今1234567890也。

書之。「」。
書之。「Testing core helper functions:」。

注曰「Test: 向下取整」
施「向下取整」於「測試數一」。名之曰「結果一」。
書之。「向下取整(12345.6789) = 」。
書之。「結果一」。

注曰「Test: 數字轉字符串」
施「數字轉字符串」於「測試數一」。名之曰「結果二」。
書之。「數字轉字符串(12345.6789) = 」。
書之。「結果二」。

注曰「Test: 冪」
施「冪」於十於二。名之曰「結果三」。
書之。「冪(10, 2) = 」。
書之。「結果三」。

書之。「」。
書之。「Testing Issue #37 Requirement 1: 格式化小數」。

注曰「Test: 格式化小數 - precision 2」
施「格式化小數」於「測試數一」於二。名之曰「格式結果一」。
書之。「格式化小數(12345.6789, 2) = 」。
書之。「格式結果一」。

注曰「Test: 格式化小數 - precision 4」
施「格式化小數」於「測試數二」於四。名之曰「格式結果二」。
書之。「格式化小數(-0.025, 4) = 」。
書之。「格式結果二」。

書之。「」。
書之。「Issue #37 Core Functionality Test Complete!」。