# 文言標準庫編碼標準 - Wenyan Standard Library Coding Standards

**Author: Whisky, PR Worker**

## 概述 - Overview

本文檔建立了文言標準庫項目的統一編碼標準，確保代碼質量、可維護性和一致性。
This document establishes unified coding standards for the Wenyan Standard Library project to ensure code quality, maintainability, and consistency.

## 1. 代碼風格指南 - Code Style Guide

### 1.1 文件結構 - File Structure

```wenyan
/*
 * 文件標題 - File Title
 * Author: [作者名], [角色]
 * 
 * 文件描述 (中文)
 * File description (English)
 */

/* ===== 引用部分 ===== */
引用「其他庫」。

/* ===== 常量定義 ===== */
吾有一數。名之曰「常量名」。
昔之「常量名」者。今值是矣。

/* ===== 主要函數 ===== */
吾有一術。名之曰「函數名」。欲行是術。...
```

### 1.2 命名規範 - Naming Conventions

#### 函數命名 - Function Naming
- 使用古典中文動詞短語
- 描述具體功能行為
- 保持簡潔且語義明確

**良好示例：**
```wenyan
「取字符串長度」    - 獲取字符串長度
「拼接字符串」      - 連接兩個字符串
「查找子字符串」    - 在字符串中查找子串
「轉換為大寫」      - 轉換字符串為大寫
```

**避免的命名：**
```wenyan
「處理」           - 過於籠統
「函數一」         - 無意義
「doSomething」    - 混用語言
```

#### 變量命名 - Variable Naming
- 使用描述性中文名詞
- 體現變量用途和內容類型
- 避免單字符或縮寫

**良好示例：**
```wenyan
「字符串內容」     - 存儲字符串的變量
「列表長度」       - 存儲列表大小
「循環計數器」     - 循環中的計數變量
「臨時結果」       - 臨時存儲計算結果
```

#### 常量命名 - Constant Naming
- 使用大寫或明確的常量描述
- 體現常量的用途和性質

**示例：**
```wenyan
「最大長度」       - 限制值常量
「默認值」         - 默認設置
「錯誤碼」         - 錯誤標識
```

### 1.3 代碼格式 - Code Formatting

#### 縮進 - Indentation
- 使用4個空格縮進
- 不使用制表符
- 保持一致的縮進層次

#### 空行使用 - Blank Lines
```wenyan
/* 函數之間空兩行 */
吾有一術。名之曰「函數一」。...
是謂「函數一」之術也。


吾有一術。名之曰「函數二」。...
是謂「函數二」之術也。

/* 邏輯塊之間空一行 */
吾有一數。名之曰「結果」。

若「條件」為真者。
    /* 執行某操作 */
云云。

/* 下一個邏輯塊 */
```

#### 註釋風格 - Comment Style
```wenyan
/* 
 * 多行註釋用於函數和重要邏輯說明
 * Multi-line comments for functions and important logic
 */

/* 單行註釋用於簡短說明 */

/* ===== 區段分隔註釋 ===== */
```

## 2. 函數設計原則 - Function Design Principles

### 2.1 單一職責原則 - Single Responsibility
每個函數應該只負責一個明確的功能：

```wenyan
/* 好的設計 - 單一職責 */
吾有一術。名之曰「計算字符串長度」。欲行是術。必先得一言。曰「輸入字符串」。乃行是術曰。
    夫「輸入字符串」之長。乃得其也。
是謂「計算字符串長度」之術也。

/* 避免 - 多重職責 */
吾有一術。名之曰「處理字符串並顯示結果」。欲行是術。...
```

### 2.2 參數設計 - Parameter Design
- 參數名要明確表示用途
- 按重要性排序參數
- 使用描述性參數名

```wenyan
吾有一術。名之曰「在字符串中查找」。欲行是術。必先得二言。曰「原字符串」。曰「查找目標」。乃行是術曰。
    /* 實現邏輯 */
是謂「在字符串中查找」之術也。
```

### 2.3 返回值設計 - Return Value Design
- 明確返回值類型和含義
- 一致的錯誤處理模式
- 使用有意義的返回值

## 3. 錯誤處理模式 - Error Handling Patterns

### 3.1 統一錯誤信息格式 - Unified Error Message Format

```wenyan
/* 錯誤信息模板 */
「錯誤：[操作描述] - [具體錯誤原因]」

/* 示例 */
「錯誤：字符串轉換 - 輸入為空」
「錯誤：列表操作 - 索引超出範圍」
「錯誤：數學運算 - 除零操作」
```

### 3.2 異常處理模式 - Exception Handling Pattern

```wenyan
吾有一術。名之曰「安全除法」。欲行是術。必先得二數。曰「被除數」。曰「除數」。乃行是術曰。
    若「除數」等於〇者。
        書之「錯誤：數學運算 - 除零操作」。
        乃得「錯誤」。
    云云。
    
    除「被除數」以「除數」。乃得其也。
是謂「安全除法」之術也。
```

### 3.3 邊界條件檢查 - Boundary Condition Checks

```wenyan
吾有一術。名之曰「取列表元素」。欲行是術。必先得一列一數。曰「列表」。曰「索引」。乃行是術曰。
    /* 檢查列表是否為空 */
    夫「列表」之長。名之曰「列表長度」。
    若「列表長度」等於〇者。
        書之「錯誤：列表操作 - 列表為空」。
        乃得「錯誤」。
    云云。
    
    /* 檢查索引範圍 */
    若「索引」小於一者。
        書之「錯誤：列表操作 - 索引小於1」。
        乃得「錯誤」。
    云云。
    
    若「索引」大於「列表長度」者。
        書之「錯誤：列表操作 - 索引超出範圍」。
        乃得「錯誤」。
    云云。
    
    /* 正常獲取元素 */
    夫「列表」之「索引」。乃得其也。
是謂「取列表元素」之術也。
```

## 4. 性能指導原則 - Performance Guidelines

### 4.1 算法效率 - Algorithm Efficiency
- 優先使用高效算法
- 避免不必要的循環嵌套
- 重用計算結果

### 4.2 內存使用 - Memory Usage
- 及時釋放不需要的變量
- 避免創建過多臨時變量
- 重用數據結構

### 4.3 性能測試標準 - Performance Testing Standards
```wenyan
/* 性能測試模板 */
施「開始計時」。
/* 執行需要測試的操作 */
施「結束計時」於「「操作描述」」。
```

## 5. 測試標準 - Testing Standards

### 5.1 測試覆蓋要求 - Test Coverage Requirements
- 每個公共函數必須有測試
- 測試正常輸入情況
- 測試邊界條件
- 測試錯誤條件

### 5.2 測試命名 - Test Naming
```wenyan
「測試[函數名][場景描述]」

/* 示例 */
「測試字符串拼接正常情況」
「測試字符串拼接空輸入」
「測試字符串拼接邊界條件」
```

### 5.3 測試文件組織 - Test File Organization
```
tests/
├── [庫名]/
│   ├── 測試[庫名].wy          # 主要測試
│   ├── 單元測試[庫名].wy      # 單元測試
│   ├── 性能測試[庫名].wy      # 性能測試
│   └── 邊界測試[庫名].wy      # 邊界條件測試
```

## 6. 文檔標準 - Documentation Standards

### 6.1 函數文檔 - Function Documentation
```wenyan
/*
 * 函數名：[函數名]
 * 功能：[函數功能描述]
 * 參數：
 *   - 參數1：[類型] [描述]
 *   - 參數2：[類型] [描述]
 * 返回值：[類型] [描述]
 * 示例：
 *   施「函數名」於「參數1」於「參數2」。
 * 作者：[作者名], [角色]
 */
```

### 6.2 庫文檔 - Library Documentation
每個庫都應該有完整的README.md文件，包含：
- 功能概述
- 安裝說明
- 使用示例
- API參考
- 貢獻指南

## 7. 索引系統 - Indexing System

### 7.1 基於1的索引 - 1-based Indexing
文言標準庫統一使用基於1的索引：

```wenyan
/* 正確：使用1作為起始索引 */
夫「列表」之一。        /* 第一個元素 */
夫「列表」之二。        /* 第二個元素 */

/* 避免：使用0作為起始索引 */
夫「列表」之〇。        /* 避免使用 */
```

### 7.2 索引邊界檢查 - Index Boundary Checks
```wenyan
/* 標準索引檢查模式 */
若「索引」小於一者。
    /* 處理索引過小錯誤 */
云云。

夫「容器」之長。名之曰「長度」。
若「索引」大於「長度」者。
    /* 處理索引過大錯誤 */
云云。
```

## 8. 中文字符支持 - Chinese Character Support

### 8.1 編碼標準 - Encoding Standards
- 所有文件使用UTF-8編碼
- 支持中文字符作為變量名和函數名
- 測試文件中包含中文字符測試案例

### 8.2 中文處理最佳實踐 - Chinese Processing Best Practices
```wenyan
/* 中文字符長度計算 */
吾有一術。名之曰「取中文字符數」。欲行是術。必先得一言。曰「中文字符串」。乃行是術曰。
    /* 實現中文字符計數邏輯 */
    夫「中文字符串」之長。乃得其也。
是謂「取中文字符數」之術也。
```

## 9. 版本控制標準 - Version Control Standards

### 9.1 提交信息格式 - Commit Message Format
```
[類型] [範圍] - [描述]

類型：
- 實現 (feat): 新功能
- 修復 (fix): 錯誤修復  
- 文檔 (docs): 文檔更新
- 測試 (test): 測試相關
- 重構 (refactor): 代碼重構

示例：
實現 字符串經 - 添加字符串拼接功能
修復 列經 - 修復列表索引越界問題
文檔 測試框架 - 更新測試標準文檔
```

### 9.2 分支命名 - Branch Naming
```
[類型]-[功能描述]-issue-[問題號]

示例：
feature-testing-framework-issue-3
fix-string-concatenation-issue-5
docs-coding-standards-issue-7
```

## 10. 代碼審查標準 - Code Review Standards

### 10.1 審查檢查清單 - Review Checklist
- [ ] 代碼符合命名規範
- [ ] 函數單一職責明確
- [ ] 錯誤處理完整
- [ ] 測試覆蓋充分
- [ ] 文檔完整準確
- [ ] 性能考慮合理
- [ ] 中文字符支持正確

### 10.2 審查意見格式 - Review Comment Format
```
[級別] [位置] - [建議]

級別：
- 必須修復：影響功能或安全的問題
- 建議改進：提升代碼質量的建議
- 討論：需要進一步討論的問題

示例：
必須修復 line 25 - 缺少空指針檢查
建議改進 函數命名 - 建議使用更具描述性的名稱
討論 算法選擇 - 是否考慮使用更高效的排序算法
```

## 總結 - Summary

本編碼標準確保文言標準庫項目的代碼質量和一致性。所有貢獻者都應該遵循這些標準，以維護項目的專業性和可維護性。

This coding standard ensures code quality and consistency for the Wenyan Standard Library project. All contributors should follow these standards to maintain the project's professionalism and maintainability.